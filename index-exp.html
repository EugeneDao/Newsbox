<html>
  <body>
    <h1>Newsbox</h1>
    <h2>Api auto update</h2>

    <p>forEach() calls a function for each element in an array:</p>

    <p id="demo"></p>

    <script>
      const url =
        "https://newsapi.org/v2/top-headlines?country=us&apiKey=277f8ff1c93f4d7c98cbb220e9fc9d5b";
      async function getApi(url) {
        const response = await fetch(url);
        let data = await response.json();
        let headlines = data.articles;
        console.log(headlines);
        //   function call headlines

        function getArticle(i) {
          let arr = headlines[i];
          let title = arr.title;
          let urlNews = arr.url;
          console.log(urlNews);
          let text = document.createElement("div");
          let textHeadline = document.createTextNode(title);
          text.setAttribute("id", `title_${i}`);
          let box = document.getElementById("demo");
          box.appendChild(text);
          let a = document.createElement("a");
          a.appendChild(textHeadline);
          a.title = title;
          a.setAttribute("href", urlNews);
          text.appendChild(a);
        }
        function getImage(i) {
          let arr = headlines[i];
          let urlNews = arr.urlToImage;
          let img = document.createElement("img");
          img.src = urlNews;
          let box = document.getElementById("demo");
          box.appendChild(img);
        }
        for (let i = 0; i < 10; i++) {
          getArticle(i);
          getImage(i);
        }
      }
      getApi(url);
    </script>
  </body>
</html>
